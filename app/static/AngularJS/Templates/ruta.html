<link href="css/ruta.css" rel="stylesheet">
<div id="page-content" ng-init="init()">
    <div class="row ">
        <div class="col-sm-10 col-sm-push-1 mar-top">
            <div id="">
                <h1 class="page-header text-overflow">Rutas</h1>
                </h1>
            </div>
        </div>
        <div class="col-sm-10 col-sm-push-1 mar-top ">
            <div class="panel ">
                <div class="panel-body pad-top mar-top">
                    <div class="col-sm-6  col-xs-12">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-3 ">Empresa:</label>
                                <div class="col-sm-8">
                                    <select ng-change="cambioEmpresa()" id="selEmpresas" class="form-control" ng-options="empresa as empresa.emp_nombre for empresa in empresas track by empresa.emp_idempresa" ng-model="empresaActual"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2  col-xs-12">&nbsp;</div>
                    <div class="col-sm-4  col-xs-12" ng-hide="newRuta">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-8">
                                    <div class="col-sm-11 control-label">
                                        <a class="form-control btn btn-block btn-primary" ng-click="verWizard(true,1);" style="font-size: 11px">Nueva Ruta</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row  col-sm-12  recuadro" ng-show="gridRutas" style="margin-top: 50PX">
                        <div class="col-sm-12 encab">Busqueda de Rutas </div>
                        <div class="col-sm-12  mar-top">
                            <table id="tblOperadoresUnidadesRutas">
                                <thead>
                                    <tr>
                                        <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="operador">
                                            Ruta
                                        </th>
                                        <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="operador">
                                            Operador
                                        </th>
                                        <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="unidad">
                                            Unidad
                                        </th>
                                        <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="situacion">
                                            Situación
                                        </th>
                                        <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="editar">
                                            Editar
                                        </th>
                                        <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="ver">
                                            Ver
                                        </th>
                                        <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="eliminar">
                                            Eliminar
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="elemento in OperadoresUnidadesRutas">
                                        <td>
                                            <span>{{elemento.folio}}</span>
                                        </td>
                                        <td>
                                            <span>{{elemento.operador}}</span>
                                        </td>
                                        <td>
                                            <span>{{elemento.unidad}}</span>
                                        </td>
                                        <td>
                                            <div class="label label-table" ng-style="{ 'background-color':'{{elemento.colorsit}}' }">{{elemento.situacion}}</div>
                                        </td>
                                        <td>
                                            <a class="btn btn-success  btn-icon" ng-click="editarR(elemento)">
                                                <i class="fa fa-pencil"></i>
                                            </a>
                                        </td>
                                        <td>
                                            <a class="btn btn-info  btn-icon" ng-click="ver(elemento)">
                                                <i class="fa fa-search"></i>
                                            </a>
                                        </td>
                                        <td>
                                            <a class="btn btn-danger btn-icon">
                                                <i class="fa fa-trash-o"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--wizard-->
<div class="modal fade " id="modal-panelRuta" tabindex="-1" role="dialog" style="overflow: auto;" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog   modal-lg">
        <div class="modal-content">
            <div class="modal-header " style="overflow: auto;">
                <button type="button" class="close" ng-click="salir()">&times;</button>
            </div>
            <div class="modal-body" style="margin-top: 0px;overflow: hidden;">
                <div class="col-sm-12">
                    <div>
                        <div class="row">
                            <section>
                                <div class="wizard" id="rootwizard" style="margin-top: 0px ">
                                    <div class="wizard-inner">
                                        <div class="connecting-line "></div>
                                        <ul class="nav nav-tabs" role="tablist" style="margin-top: 0px !important">
                                            <li role="presentation" class="active">
                                                <a href="#step1" data-toggle="tab" aria-controls="step1" role="tab" title="Descripción">
                                                    <span class="round-tab">
                                                        <i class="glyphicon glyphicon-road"></i>
                                                    </span>
                                                </a>
                                                <div class="titu"> <span>Descripción</span> </div>
                                            </li>
                                            <li role="presentation" class="disabled">
                                                <a href="#step2" data-toggle="tab" aria-controls="step2" role="tab" title="Direcciones">
                                                <span class="round-tab">
                                                    <i class="glyphicon glyphicon-home"></i>

                                                </span>
                                            </a>
                                                <div class="titu"> <span>Pdidos/Direcciones</span> </div>
                                            </li>
                                            <li role="presentation" class="disabled">
                                                <a href="#step3" data-toggle="tab" aria-controls="step3" role="tab" title="Completado">
                                                    <span class="round-tab">
                                                        <i class="glyphicon glyphicon-ok"></i>
                                                    </span>
                                                </a>
                                                <div class="titu"> <span>Finalizar</span> </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <div style="background-color: #5bc0de;overflow: hidden;height: 15px;" class="progress-bar"></div>
                                    <form role="form">
                                        <div class="tab-content">
                                            <div class="tab-pane active" role="tabpanel" id="step1">
                                                <div class="col-sm-6 encab"> Datos Iniciales </div>
                                                <div class="col-sm-6 " style="margin-bottom: 20px" ng-hide="hideListCatRut">
                                                    <label class="col-sm-3 ">Plantillas Rutas:</label>
                                                    <div class="col-sm-8">
                                                        <select ng-change="cambioPlantillaRuta()" id="selPlantRutas" class="form-control" ng-options="ruta as ruta.nombreRuta for ruta in rutas track by ruta.idRuta" ng-model="rutaActual"></select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12" style="margin-top: 25px">
                                                    <div class="form-group" ng-show="inputNewRuta">
                                                        <label>Nombre:</label>
                                                        <div>
                                                            <input ng-disabled="bloquea" ng-model="nombreRuta" placeholder="" id="nombre" type="text" class="form-control" required>
                                                        </div>
                                                    </div>
                                                    <div class="form-group" ng-show="inputNewRuta">
                                                        <label>Descripción:</label>
                                                        <div>
                                                            <input ng-disabled="bloquea" ng-model="descripcion" placeholder="" id="apPaterno" class="form-control" rows="5">
                                                        </div>
                                                    </div>
                                                    <div class="form-group" style="overflow: hidden;">
                                                        <div class="col-sm-2 control-label" style="float: right;">
                                                            <a class="form-control btn btn-block btn-primary ti-plus" ng-click="getOperadores();" style="font-size: 11px"></a>
                                                        </div>
                                                        <label>Operador:</label>
                                                        <div> &nbsp; &nbsp; {{nombreOperador}}</div>
                                                    </div>
                                                    <div class="form-group" style="overflow: hidden;">
                                                        <div class="col-sm-2 control-label" style="float: right;">
                                                            <a class="form-control btn btn-block btn-primary ti-plus" ng-click="getUnidades();" style="font-size: 11px"></a>
                                                        </div>
                                                        <label>Unidad:</label>
                                                        <div> &nbsp; &nbsp;{{descripcionUni}} &nbsp; {{modelo}} </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12">
                                                    <ul class="list-inline pull-right">
                                                        <li>
                                                            <button type="button" class="btn btn-primary next-step" ng-click="panelDirecciones()">Siguiente</button>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="tab-pane" role="tabpanel" id="step2" style="padding-top: 0px">
                                                <div class="row mar-top recuadro">
                                                    <div class="col-sm-10 encab" style="margin-bottom: 20px"> Pedidos: </div>
                                                    <table id="tbldireccSel" ng-show="verdir" class="mar-top" style="width: 100%;">
                                                        <thead>
                                                            <tr>
                                                                <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="operador">
                                                                    Empresa
                                                                </th>
                                                                <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="unidad">
                                                                   Sucursal
                                                                </th>
                                                                  <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="editar">
                                                                    Pedido
                                                                </th>
                                                                <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="editar">
                                                                    Fecha
                                                                </th>
                                                                 <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="operador">
                                                                    Cliente
                                                                </th>
                                                                <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="unidad">
                                                                    Dirección
                                                                </th>
                                                                <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="editar">
                                                                    Eliminar
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="pedidoDireccion in dirForadd">
                                                            
                                                                 <td>
                                                                       <span>{{pedidoDireccion.emp_nombre}}</span>
                                                                 </td>
                                                                  <td>
                                                                       <span>{{pedidoDireccion.suc_nombre}}</span>
                                                                 </td>
                                                                  <td>
                                                                       <span>{{pedidoDireccion.pre_pedidobpro}}</span>
                                                                 </td>
                                                                  <td>
                                                                       <span>{{pedidoDireccion.fechaalta}}</span>
                                                                 </td>
                                                                <td>
                                                                       <span>{{pedidoDireccion.cliente}}</span>
                                                                 </td>
                                                                  <td> 
                                                                    <span>
                                                                    &nbsp; {{pedidoDireccion.RTD_CALLE1}}
                                                                    &nbsp; {{pedidoDireccion.RTD_NUMEXTER}}
                                                                    &nbsp; Col. {{pedidoDireccion.RTD_COLONIA}}
                                                                    <br>
                                                                    &nbsp; Delg. {{pedidoDireccion.RTD_DELEGAC}}
                                                                    &nbsp; Cp. {{pedidoDireccion.RTD_CODPOS}}
                                                                    &nbsp; {{pedidoDireccion.RTD_CIUDAD}}
                                                                    </span>
                                                                 </td>

                                                                <td>
                                                                    <a class="btn btn-danger btn-icon" ng-click="dirForadd.splice($index, 1);rowC(pedidoDireccion)">
                                                                        <i class="fa fa-trash-o "></i>
                                                                    </a>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <div class="col-sm-9" ng-hide="verdir" style="font-size: 45px;color:  #e9e9e9;">
                                                        &nbsp; Sin Elegir
                                                    </div>
                                                    <div class="col-sm-3 float-right mar-top" style="float:  right;">
                                                        <div class="col-sm-11 control-label mar-top">
                                                            <a class="form-control btn btn-block btn-primary" ng-click="verDirecciones()" style="font-size: 11px">Agregar Direccion</a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <ul class="list-inline pull-right">
                                                    <li>
                                                        <button type="button" class="btn btn-default prev-step">Anterior</button>
                                                    </li>
                                                    <li>
                                                        <button type="button" class="btn btn-primary next-step" ng-click="panelResumen()">Siguiente</button>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="tab-pane" role="tabpanel" id="step3">
                                                <div class="row mar-top recuadro">
                                                    <div class="col-sm-12 encab">
                                                        Resumen
                                                    </div>
                                                    <div class="col-sm-8">
                                                        <div class="col-sm-12 mar-top">
                                                            <div class="form-group">
                                                                <span>Nombre: &nbsp; {{nombreRuta}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12 mar-top">
                                                            <div class="form-group">
                                                                <span> Operador: &nbsp; {{nombreOperador}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12 mar-top">
                                                            <div class="form-group">
                                                                <span>Unidad: &nbsp; {{descripcionUni}}  &nbsp;&nbsp; {{modelo}} </span>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12 mar-top">
                                                            <div class="form-group">
                                                                Total Direcciones de esta ruta: &nbsp; {{lengthDirSell}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <img src="images/MAP.jpg" style="width: 100%">
                                                    </div>
                                                </div>
                                                <ul class="list-inline pull-right">
                                                    <li>
                                                        <button type="button" class="btn btn-default prev-step" ng-click="atrasSave()">Anterior</button>
                                                    </li>
                                                    <li>
                                                        <button type="button" class="btn btn-default next-step" ng-click="salir()">Salir</button>
                                                    </li>
                                                    <li>
                                                        <button type="button" class="btn btn-primary btn-info-full next-step" ng-click="preguntaSave()">Guardar</button>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                .
            </div>
        </div>
    </div>
</div>
<!--mODALES-->
<div class="modal fade " id="modalDirecc" tabindex="-1" role="dialog" style="overflow: scroll;">
    <div class="modal-dialog   modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Selecciona Pedidos para agregar:</h4>
                <button type="button" class="close" ng-click="salirDir()">&times;</button>
            </div>
            <br>
            <div class="modal-body">
                <div class="col-sm-12">
                    <div ng-show="direcciones.length > 0" class="col-xs-12">
                        <table id="tblDirecc">
                           <!--  <thead>
                                <tr>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="nombre" style="margin-right: 15px">
                                        Direccion
                                    </th>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="editar" style="margin-right: 15px">
                                        Seleciona
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="direccion in direcciones">
                                    <td>
                                        <span>{{direccion.RTD_CALLE1}}&nbsp;{{direccion.RTD_NUMEXTER}}&nbsp;{{direccion.RTD_COLONIA}}&nbsp;{{direccion.RTD_DELEGAC}}&nbsp;{{direccion.RTD_CODPOS}}&nbsp;{{direccion.RTD_CIUDAD}}</span>
                                    </td>
                                    <td>
                                        <input type="checkbox" ng-init="(direccion.seleccionado == 1)?direccion.seleccionada=true:direccion.seleccionada=false" ng-model="direccion.seleccionada" aria-label="Checkbox for following text input" ng-checked="{{ direccion.seleccionada }}">
                                    </td>
                                </tr>
                            </tbody> -->
                             <thead>
                                                            <tr>
                                                                <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="operador">
                                                                    Empresa
                                                                </th>
                                                                <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="unidad">
                                                                   Sucursal
                                                                </th>
                                                                  <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="editar">
                                                                    Pedido
                                                                </th>
                                                                <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="editar">
                                                                    Fecha
                                                                </th>
                                                                 <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="operador">
                                                                    Cliente
                                                                </th>
                                                                <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="unidad">
                                                                    Dirección
                                                                </th>
                                                               <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="editar" style="margin-right: 15px">
                                        Seleciona
                                    </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="direccionPe in direcciones">
                                                            
                                                                 <td>
                                                                       <span>{{direccionPe.emp_nombre}}</span>
                                                                 </td>
                                                                  <td>
                                                                       <span>{{direccionPe.suc_nombre}}</span>
                                                                 </td>
                                                                  <td>
                                                                       <span>{{direccionPe.pre_pedidobpro}}</span>
                                                                 </td>
                                                                  <td>
                                                                       <span>{{direccionPe.fechaalta}}</span>
                                                                 </td>
                                                                <td>
                                                                       <span>{{direccionPe.cliente}}</span>
                                                                 </td>
                                                                  <td> 
                                                                    <span>
                                                                    &nbsp; {{direccionPe.RTD_CALLE1}}
                                                                    &nbsp; {{direccionPe.RTD_NUMEXTER}}
                                                                    &nbsp; Col. {{direccionPe.RTD_COLONIA}}
                                                                    <br>
                                                                    &nbsp; Delg. {{direccionPe.RTD_DELEGAC}}
                                                                    &nbsp; Cp. {{direccionPe.RTD_CODPOS}}
                                                                    &nbsp; {{direccionPe.RTD_CIUDAD}}
                                                                    </span>
                                                                 </td>
                                                                  <td>
                                        <input type="checkbox" ng-init="(direccionPe.seleccionada == 1)?direccionPe.seleccionada=true:direccionPe.seleccionada=false" ng-model="direccionPe.seleccionada" aria-label="Checkbox for following text input" ng-checked="{{ direccionPe.seleccionada }}">
                                    </td>

                                                               
                                                            </tr>
                                                        </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="direccionParaRuta(direccionPe);">Aceptar</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade " id="modalOperador" tabindex="-1" role="dialog">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Selecciona Operador:</h4>
                <button type="button" class="close" ng-click="salirOpe()">&times;</button>
            </div>
            <br>
            <div class="modal-body">
                <div class="col-sm-12">
                    <div ng-show="listOperadores.length > 0" class="col-xs-12">
                        <table id="tblOperadores">
                            <thead>
                                <tr>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="nombre" st-sort="nombre">
                                        Nombre
                                    </th>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="telefono" st-sort="telefono">
                                        Telefono
                                    </th>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="editar">
                                        Seleciona
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="operador in listOperadores">
                                    <td>
                                        <span>{{operador.nombre}}&nbsp;{{operador.apellidoPaterno}}&nbsp;{{operador.apellidoMaterno}}</span>
                                    </td>
                                    <td>
                                        <span>{{operador.telefono}}</span>
                                    </td>
                                    <td>
                                        <a class="btn btn-info btn-icon" ng-click="seleccionaOpe(operador);">
                                             <i class="ti-export"></i>
                                        </a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade " id="modalUnidad" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Selecciona Unidad:</h4>
                <button type="button" class="close" ng-click="salirUni()">&times;</button>
            </div>
            <br>
            <div class="modal-body">
                <div class="col-sm-12">
                    <div ng-show="listUnidades.length > 0" class="col-xs-12">
                        <table id="tblUnidades">
                            <thead>
                                <tr>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="descripcion">
                                        Marca
                                    </th>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="modelo">
                                        Modelo
                                    </th>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="color">
                                        Color
                                    </th>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="placas">
                                        Placas
                                    </th>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="tipo">
                                        Tipo
                                    </th>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="capacidad">
                                        capacidad
                                    </th>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="metrosCubicos">
                                        metrosCubicos
                                    </th>
                                    <th st-class-ascent="fa fa-sort-asc" st-class-descent="fa fa-sort-desc" st-skip-natural="true" st-sort="editar">
                                        Seleccionar
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="unidad in listUnidades">
                                    <td>
                                        <span>{{unidad.descripcion}}</span>
                                    </td>
                                    <td>
                                        <span>{{unidad.modelo}}</span>
                                    </td>
                                    <td>
                                        <span>{{unidad.color}}</span>
                                    </td>
                                    <td>
                                        <span>{{unidad.placas}}</span>
                                    </td>
                                    <td>
                                        <span>{{unidad.Tipo}}</span>
                                    </td>
                                    <td>
                                        <span>{{unidad.capacidad}}</span>
                                    </td>
                                    <td>
                                        <span>{{unidad.metrosCubicos}}</span>
                                    </td>
                                    <td>
                                        <a class="btn btn-info btn-icon" ng-click="seleccionaUni(unidad)">
                                                <i class="ti-export" ></i>
                                            </a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
        </div>
    </div>
</div>
<!-- aqui -->
<div class="modal fade" id="modalDetalleRuta" >
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title text-center"><strong> Despacho de Ruta </strong></h4>
                 <!--    <div class="glyphicon glyphicon-print" ng-click="imprimir()" title="Imprimir" style="padding-left: 96%; width: 135px; font-size: 25px; cursor: pointer;color:#fff"> </div> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="panel panel-default">
                            <div class="panel-body fondoInfoOtr">
                                <div class="col-sm-6">
                                    <label>Folio: </label><span class=""> {{rutaDetalle.folio}} </span>
                                </div>
                                <div class="col-sm-6">
                                    <label>Ruta: </label><span class=""> {{rutaDetalle.ruta}} </span>
                                </div>
                                <div class="col-sm-6">
                                    <label>Operador: </label><span class=""> {{rutaDetalle.operador}} </span>
                                </div>
                                <div class="col-sm-6">
                                    <label>Descripción: </label><span class=""> {{rutaDetalle.descripcion}} </span>
                                </div>
                                <div class="col-sm-6">
                                    <label>Unidad: </label><span class=""> {{rutaDetalle.unidad}} </span>
                                </div>
                                <div class="col-sm-6">
                                    <label># Direcciones: </label><span class=""> {{numDirRut}} </span>
                                </div>
                                 <div class="col-sm-6">
                                    <label>Fecha: </label><span class=""> 23/02/2018</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12">
                        <div class="table-responsive">
                            <table class="table table-condensed table-hover otrasFact">
                                <thead>
                                    <tr>
                                        <th>Empresa: </th>
                                        <th>Sucursal: </th>
                                        <th>Pedido: </th>
                                        <th>Fecha: </th>
                                        <th>Cliente: </th>
                                        <th>Direccion: </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="pedidoDireccion in pedidoDireccionesRuta" class="puntero">
                                        
                                         <td>
                                               <span>{{pedidoDireccion.emp_nombre}}</span>
                                         </td>
                                          <td>
                                               <span>{{pedidoDireccion.suc_nombre}}</span>
                                         </td>
                                          <td>
                                               <span>{{pedidoDireccion.pre_pedidobpro}}</span>
                                         </td>
                                          <td>
                                               <span>{{pedidoDireccion.fechaalta}}</span>
                                         </td>
                                        <td>
                                               <span>{{pedidoDireccion.cliente}}</span>
                                         </td>
                                          <td> 
                                            <span>
                                            &nbsp; {{pedidoDireccion.RTD_CALLE1}}
                                            &nbsp; {{pedidoDireccion.RTD_NUMEXTER}}
                                            &nbsp; Col. {{pedidoDireccion.RTD_COLONIA}}
                                            <br>
                                            &nbsp; Delg. {{pedidoDireccion.RTD_DELEGAC}}
                                            &nbsp; Cp. {{pedidoDireccion.RTD_CODPOS}}
                                            &nbsp; {{pedidoDireccion.RTD_CIUDAD}}
                                            </span>
                                         </td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="limpiaModal()">Salir</button>
            </div>
        </div>
    </div>
</div>
<!--report-->
<div class="modal fade modal-pedido" id="modalDetalle" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" class="bg bg-mint" ng-style="colorEstatus">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 style="text-align:center;color:#fff">PEDIDO {{estatus}} </h3>
                <div class="glyphicon glyphicon-print" ng-click="imprimir()" title="Imprimir" style="padding-left: 96%; width: 135px; font-size: 25px; cursor: pointer;color:#fff"> </div>
                <!--a href="#" onClick="window.open('/invoice', '_blank')">OOOO</a-->
            </div>
            <div ng-style="colorEstatus">
                <!--a href="{{'/invoice/'+detalle.idPedidoBPRO}}" class="btn btn-info btn-icon"><i class="fa fa-search">Print Invoice</i></a>
                    <a href="invoice_print.html" target="_blank" class="btn btn-primary"><i class="fa fa-print"></i> Print Invoice </a-->
            </div>
            <br>
            <div id="imprimeme">
                <div>
                    <table>
                        <tr>
                            <td>
                                <strong>Empresa: </strong>Andrade
                            </td>
                            <td>
                            </td>
                            <td>
                                <strong>Pedido: </strong>{{idpedido}} - <strong>Solicitado:</strong> {{empresa.FECHAPEDIDO}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>Dirección: </strong> {{empresa.DIRECCION}}
                            </td>
                            <td>
                            </td>
                            <td>
                                <strong>Cliente:</strong>Universidad
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>Teléfono: </strong> {{empresa.TELEFONO}}
                            </td>
                            <td>
                            </td>
                            <td>
                                <strong>Dirección:</strong> {{empresa.DIRCLIENTE}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td>
                            </td>
                            <td>
                                <strong>Correo: </strong>{{empresa.CORREOCLIENTE}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td>
                            </td>
                            <td>
                                <strong>Teléfono: </strong>{{empresa.TELCLIENTE}}
                            </td>
                        </tr>
                    </table>
                </div>
                <br>
                <br>
                <div>
                    <!--class="modal-body"-->
                    <table width="100%" class="table">
                        <thead>
                            <th style="text-align:left;">
                                No Serie
                            </th>
                            <th style="text-align:left;">
                                Descripción
                            </th>
                            <th>
                                Precio/Pz
                            </th>
                            <th>
                                No. Piezas
                            </th>
                            <th width="15%" style="text-align:center">
                                Estatus
                            </th>
                            <th style="text-align:center">
                                Pedido
                            </th>
                            <th style="text-align:right">
                                Subtotal
                            </th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="detalle in detalles">
                                <!-- ng-class="{'info': detalle.estatus == 0,'success': detalle.estatus == 1,'warning':detalle.estatus == 2}" -->
                                <td>
                                    <span>{{detalle.PTS_IDPARTE}}</span>
                                </td>
                                <td>
                                    {{detalle.PTS_DESPARTE}}
                                </td>
                                <td>
                                    <div>{{detalle.PTS_PCOLISTA | currency}}</div>
                                </td>
                                <td align="center">
                                    {{detalle.prd_cantidadsolicitada}}
                                </td>
                                <td width="15%" style="text-align:center">
                                    <div class="label label-table" ng-style="{ 'background-color':'{{detalle.color}}' }">
                                        {{detalle.estatusPieza}}
                                    </div>
                                </td>
                                <td style="text-align:center">
                                    {{detalle.idPedidoBPRO}}
                                </td>
                                <td align="right">
                                    {{detalle.totalItem | currency}}
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="6" style="text-align:right">
                                    <b>Subtotal:</b>
                                    <br> <b>Iva:</b>
                                    <br>
                                    <b>Total:</b>
                                </td>
                                <td style="text-align:right">
                                    {{subtotal| currency}}
                                    <br> {{subtotal * .16 | currency}}
                                    <br>{{subtotal + (subtotal*.16)| currency}}
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
$(document).ready(function() {

    $('#rootwizard').bootstrapWizard({
        onTabShow: function(tab, navigation, index) {
            var $total = navigation.find('li').length;
            var $current = index + 1;
            var $percent = ($current / $total) * 100;
            $('#rootwizard .progress-bar').css({ width: $percent + '%' });
        }
    });
    //Initialize tooltips
    $('.nav-tabs > li a[title]').tooltip();

    //Wizard
    $('a[data-toggle="tab"]').on('show.bs.tab', function(e) {

        var $target = $(e.target);

        if ($target.parent().hasClass('disabled')) {
            return false;
        }
    });

    $(".next-step").click(function(e) {

        var $active = $('.wizard .nav-tabs li.active');
        $active.next().removeClass('disabled');
        nextTab($active);

    });
    $(".prev-step").click(function(e) {

        var $active = $('.wizard .nav-tabs li.active');
        prevTab($active);

    });
});

function nextTab(elem) {
    $(elem).next().find('a[data-toggle="tab"]').click();
}

function prevTab(elem) {
    $(elem).prev().find('a[data-toggle="tab"]').click();
}

$('#panelRuta').modal({
    backdrop: 'static',
    keyboard: false
});
</script>